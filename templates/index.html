<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Seat Occupancy Dashboard</title>
<style>
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #ddd;
    margin: 0;
  }
  #seating {
    width: 80%;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
  }
</style>
</head>
<body>

<!-- Embed your SVG here -->
<div id="seating">
  <!-- Paste full contents of 501.svg here -->
  <!-- Example small version: -->
  <svg viewBox="0 0 600 400" xmlns="http://www.w3.org/2000/svg">
    <!-- Example layout (replace this with your 501.svg content) -->
    <rect id="seat1" x="50" y="50" width="40" height="40" fill="blue" />
    <rect id="seat2" x="120" y="50" width="40" height="40" fill="blue" />
    <rect id="seat3" x="190" y="50" width="40" height="40" fill="blue" />
    <rect id="seat4" x="260" y="50" width="40" height="40" fill="blue" />
    <rect id="seat5" x="330" y="50" width="40" height="40" fill="blue" />
  </svg>
</div>

<script>
// Poll backend for seat status every 1 second
async function updateSeats() {
  try {
    const res = await fetch("/seat_status");
    const data = await res.json();
    for (const [seatId, occupied] of Object.entries(data)) {
      const el = document.getElementById(seatId);
      if (el) {
        el.setAttribute("fill", occupied ? "green" : "red");
      }
    }
  } catch (err) {
    console.error("Error fetching seat data:", err);
  }
}

setInterval(updateSeats, 1000);
</script>

</body>
</html>
